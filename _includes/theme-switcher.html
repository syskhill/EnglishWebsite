<div class="theme-switcher">
  {% for theme in site.themes %}
  <div class="theme-btn theme-{{ theme.id }}" data-theme="{{ theme.id }}" title="{{ theme.name }} Theme"></div>
  {% endfor %}
</div>

<script>
  // Immediately set the theme to avoid flash of default theme
  (function() {
    const storedTheme = localStorage.getItem('theme') || 'light';
    document.documentElement.setAttribute('data-theme', storedTheme);
  })();
</script>